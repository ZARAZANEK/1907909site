{% extends 'base.html' %}

{% block title %}
Order
{% endblock %}

{% block body %}
<div class="highlighted-text"" style="top: 0px; left: 10px; width: 200px; text-align: left;">
    <form id="dataForm" method="post" enctype="multipart/form-data">
        <div class="text-container_2" style="position: relative;">
            <div class="highlighted-text" style="top:125px; left:30px; max-width: 300px;"> <h4>Your-Information</h4></div>
            <div class="highlighted-text" style="top:200px; left:30px;"> <h5 style="width: 300px; text-align: left;">Введіть ПІБ:</h5></div>
            <input type="text" class="form-control" id="name" name="name" placeholder="Введіть ПІБ" style="position: absolute; top:245px; left:30px; max-width:250px; height:40px;" required>
            <div class="highlighted-text" style="top:300px; left:25px;"> <h5 style="width: 300px; text-align: left;">Електронна адреса:</h5></div>
            <input type="email" class="form-control" id="email" name="email" required placeholder="Введіть вашу Gmail адресу тут" style="position: absolute; top:340px; left:30px; max-width:250px; height:40px;" required>
            <div class="highlighted-text" style="top:390px; left:25px;"> <h5 style="width: 300px; text-align: left;">Марка машини:</h5></div>
            <input type="text" class="form-control" id="car_mark" name="car_mark" required placeholder="Enter car make" style="position: absolute; top:430px; left:30px; max-width:250px; height:40px;" required>

            <div class="highlighted-text" style="top:125px; left:330px;"> <h4 style="max-width: 300px;">Звідки-куди</h4></div>
            <div class="highlighted-text" style="top:200px; left:325px;"> <h5 style="width: 300px; text-align: left;">Початок маршруту:</h5></div>
            <input type="text" class="form-control" id="start_geo" name="start_geo" placeholder="Enter start of geolocation" style="position: absolute; top:245px; left:330px; max-width:250px; height:40px;" required>
            <div class="highlighted-text" style="top:300px; left:325px;"> <h5 style="width: 300px; text-align: left;">Кінець маршруту:</h5></div>
            <input type="text" class="form-control" id="final_geo" name="final_geo" placeholder="Enter finaly of geolocation" style="position: absolute; top:340px; left:330px; max-width:250px; height:40px;" required> 
            <div class="highlighted-text" style="top:390px; left:325px;"> <h5 style="width: 300px; text-align: left;">Модель машини:</h5></div>
            <input type="text" class="form-control" id="car_model" name="car_model" placeholder="Enter car model" style="position: absolute; top:430px; left:330px; max-width:250px; height:40px;" required>

            <div class="highlighted-text" style="top:125px; left:630px;"> <h4 style="width: 300px;">Звідки-куди</h4></div>
            <div class="highlighted-text" style="top:200px; left:620px;"> <h5 style="width: 300px; text-align: left;">Виберіть тип транспорта:</h5></div>
            <input type="text" class="form-control" id="car_type" name="car_type" placeholder="Enter car type" style="position: absolute; top:245px; left:630px; max-width:250px; height:40px;" required>
            <div class="highlighted-text" style="top:300px; left:620px;"> <h5 style="width: 300px; text-align: left;">Вкажіть рік машини:</h5></div>
            <input type="number" class="form-control" id="car_year" name="car_year" placeholder="Enter car year" style="position: absolute; top:340px; left:630px; max-width:250px; height:40px;" required> 

            <div class="highlighted-text" style="top:500px; left:30px;"> <h5 style="width: 300px;">Second sort information</h5></div>
            <input type="text" class="form-control2" id="message" name="message" placeholder="Additional information" style="position: absolute; top:550px; left:30px; max-width:370px; height:120px;" required>
        
            <div class="highlighted-text" style="top:580px; left:410px;"> <h5 style="width: 300px;">Make an order here:</h5></div>

            <button type="submit" id="orderButton" class="rainbow-button3" style="position: absolute; top:620px; left:425px; width:120px; height:50px;">
                <img src="{{ url_for('static', filename='image/var13_car.png') }}" alt="Icon" class="icon" style="width: 32px; height: 42px;"> Order Now
            </button>

            <div class="background-overlay2" style="top: 120px; left: -50px; width: 960px; height: 600px; animation: none; background-color: inherit; border: 1px solid; border-radius: 8px;"></div>
        </div>
        <div id="errorMessage" style="display:none;color:red;position: absolute;top:670px;left:425px;">Please fill in all fields.</div>
    </form>
</div>

<img src="{{ url_for('static', filename='image/img12.png') }}" alt="icon" style="position: absolute; top: 150px; left: 900px; width: 500px; height: 350px; z-index: 20;">
<img class="header__image2" src="{{ url_for('static', filename='image/footer_img.png') }}" alt="icon" style="position: absolute; top: 875px; left: -50px; z-index: 20;">
<img class="header__image3" src="{{ url_for('static', filename='image/footer_img2.png') }}" alt="icon" style="position: absolute; top: 875px; left: 100px; z-index: 20;">
<img class="header__image4" src="{{ url_for('static', filename='image/footer_img3.png') }}" alt="icon" style="position: absolute; top: 875px; left: 250px; z-index: 20;">

<div class="highlighted-text2" style="top:860px; left:-10px;">
    <p><h5><a onclick="location.href='viber://pa?chatURI==Максим';" target="_blank" style="text-decoration: none; color: inherit; color: #5358ff;">Viber</a></h5></p>
</div>

<div class="highlighted-text2" style="top:860px; left:140px;">
    <p><h5><a onclick="location.href='https://wa.me/+380972079224';" target="_blank" style="text-decoration: none; color: inherit; color: #5358ff;">WhatsApp</a></h5></p>
</div>

<div class="highlighted-text2" style="top:860px; left:290px;">
    <p><h5><a onclick="location.href='tg://resolve?domain=Max_progger';" target="_blank" style="text-decoration: none; color: inherit; color: #5358ff;">Telegram</a></h5></p>
</div>

<div class="highlighted-text" style="top:750px; left:-20px;">
    <p><h5>Name: Shymkiv Anatoly</h5></p>
</div>
<div class="highlighted-text" style="top:800px; left:-20px;">
    <p><h5>Email: shimkivmaksim4@gmail.com</h5></p>
</div>

<div class="highlighted-text2" style="top:760px; left:450px;">
    <p><h5><a href="https://www.example.com" style="text-decoration: none; color: inherit; color: #5358ff;">Protect</a></h5></p>
</div>

<div class="highlighted-text2" style="position: absolute; top: 875px; left: 450px;">
    <h5><a href="https://www.example.com" style="text-decoration: none; color: inherit; color: #5358ff;">Privacy Policy</a></h5>
</div>

<div class="highlighted-text2" style="position: absolute; top: 825px; left: 450px;">
    <h5><a href="{{ url_for('contact_us') }}" style="text-decoration: none; color: inherit; color: #5358ff;">Contact us</a></h5>
</div>

<div class="highlighted-text" style="position: absolute; top: 825px; left: 700px;">
    <h5>Founded: 01.02.2025</h5>
</div>
<div class="highlighted-text" style="position: absolute; top: 875px; left: 700px;">
    <h5>Developer: Maximus.</h5>
</div>

<img class="header__image4" src="{{ url_for('static', filename='image/footer.png') }}" alt="icon" style="position: absolute; top: 750px; left: -100px; z-index: 20; height: 200px; width: 113.65%; z-index: -1;">


<div style="position: absolute; border-top: 2px solid white; width: 1500px; top: 749px; left: -100px;"></div>
<div style="position: absolute; border-left: 2px solid white; height: 200px; top: 750px; left: 400px; z-index: 30;"></div>

<ul id="fileList" style="position: absolute; top:550px; left:30px;"></ul>

<div class="dropdown" style="position: fixed; top: 640px; left: 1380px;">
    <button class="dropbtn">
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" class="bi bi-gear" viewBox="0 0 16 16">
            <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492M5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0"/>
            <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115z"/>
        </svg>
    </button>
    <div class="dropdown-content">
        <a href="#" style="padding: 10px;" id="lightTheme">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-brightness-high" viewBox="0 0 16 16">
            <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708"/>
          </svg><label>Light</label></a>

        <a href="#" style="padding: 10px;" id="darkTheme">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-moon-stars" viewBox="0 0 16 16">
            <path d="M6 .278a.77.77 0 0 1 .08.858 7.2 7.2 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277q.792-.001 1.533-.16a.79.79 0 0 1 .81.316.73.73 0 0 1-.031.893A8.35 8.35 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.75.75 0 0 1 6 .278M4.858 1.311A7.27 7.27 0 0 0 1.025 7.71c0 4.02 3.279 7.276 7.319 7.276a7.32 7.32 0 0 0 5.205-2.162q-.506.063-1.029.063c-4.61 0-8.343-3.714-8.343-8.29 0-1.167.242-2.278.681-3.286"/>
            <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.73 1.73 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.73 1.73 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.73 1.73 0 0 0 1.097-1.097zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.16 1.16 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.16 1.16 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732z"/>
          </svg><label style="left: 70px;">Dark</label></a>

        <a href="#" style="padding: 10px;" id="autoTheme">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-circle-half" viewBox="0 0 16 16">
            <path d="M8 15A7 7 0 1 0 8 1zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16"/>
          </svg><label style="left: 70px;">Auto</label></a>
    </div>
</div>


<script>
    const dataForm = document.getElementById('dataForm');
    const nameInput = document.getElementById('name');
    const emailInput = document.getElementById('email');
    const startGeoInput = document.getElementById('start_geo');
    const finalGeoInput = document.getElementById('final_geo');
    const carTypeInput = document.getElementById('car_type');
    const carYearInput = document.getElementById('car_year');
    const carMarkInput = document.getElementById('car_mark');
    const carModelInput = document.getElementById('car_model');
    const messageInput = document.getElementById('message');
    const orderButton = document.getElementById('orderButton');
    const errorMessage = document.getElementById('errorMessage');

    dataForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const name = nameInput.value.trim();
        const email = emailInput.value.trim();
        const startGeo = startGeoInput.value.trim();
        const finalGeo = finalGeoInput.value.trim();
        const carType = carTypeInput.value.trim();
        const carYear = carYearInput.value.trim();
        const carMark = carMarkInput.value.trim();
        const carModel = carModelInput.value.trim();
        const message = messageInput.value.trim();

        if (!name || !email || !startGeo || !finalGeo || !carType || !carYear || !carMark || !carModel || !message) {
            errorMessage.style.display = 'block';
            return;
        }
        errorMessage.style.display = 'none';

        const newOrder = { name: name, email: email, start_geo: startGeo, final_geo: finalGeo, car_type: carType, car_year: carYear, car_mark: carMark, car_model: carModel, message: message };
        console.log('Creating new order:', newOrder);

        fetch('/save_order', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(newOrder)
        })
        .then(response => {
            if (response.ok) {
                console.log('Order saved successfully');
                window.location.href = '/Order';
            } else {
                console.error('Error saving order');
                alert('There was an error saving the order. Please try again.');
            }
        })
        .catch(error => {
            console.error('Error with the fetch request:', error);
            alert('There was an error with the request. Please try again.');
        });
    });

    document.getElementById('fileInput').addEventListener('change', function(event) {
        const fileList = document.getElementById('fileList');
        fileList.innerHTML = '';
        const files = Array.from(event.target.files).slice(0, 3);
        files.forEach(file => {
            const listItem = document.createElement('li');
            listItem.textContent = file.name;
            fileList.appendChild(listItem);
        });
    });

    document.getElementById('fileInput2').addEventListener('change', function(event) {
        const fileList = document.getElementById('fileList');
        fileList.innerHTML = '';
        const files = Array.from(event.target.files).slice(0, 3);
        files.forEach(file => {
            const listItem = document.createElement('li');
            listItem.textContent = file.name;
            fileList.appendChild(listItem);
        });
    }); 
</script>
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
    
{% endblock %}
    